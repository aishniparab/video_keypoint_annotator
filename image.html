<!DOCTYPE html>
<html>

<head>
    <meta name="viewport"
          content="width=device-width,
        initial-scale=1.0,
        user-scalable=no" />
    <title>Drag/Drop/Bounce</title>
    <link rel="stylesheet" href="omnizoom/dist/omnizoom.css">
    <link rel="stylesheet" href="style.css">
    <!-- CSS ––––––––––––––––––––––––––––––––––––––––––––––––––
    <link rel="stylesheet" href="http://stackpath.bootstrapcdn.com/bootstrap/4.1.0/css/bootstrap.min.css">
    <link rel="stylesheet" href="http://cdnjs.cloudflare.com/ajax/libs/normalize/8.0.0/normalize.min.css"/>
    <link rel="stylesheet" href="css/skeleton_lex.css"/>
    <link rel="stylesheet" href="https://pro.fontawesome.com/releases/v5.0.12/css/all.css">
    <link rel="stylesheet" href="css/vidstep.css"/> -->
<style>
    #container {
        width: 50%;
        height: 100%;
        background-color: #fff;
        border: 1px solid #b222;
        display: flex;
        margin: auto;
        /*align-items: center;*/
        /*justify-content: center;*/
        overflow: hidden;
        touch-action: none;
        position: relative;
        /*background-image:url("images/IMG-0840.jpg");*/
        background-size: cover;
    }
</style>
</head>

<body>

<center><h2> Frame annotation </h2></center>

<br>

<div>
  <div id="container">

    <div id="inner">
    </div>
    <div id="outer">
    </div>
    <div id="pupil">
    </div>
    <div class="zoom-container" style="width: 100%; margin: 10px">
      <img ondragstart="return false" id="omnizoom-image" class="zoom" src="images/IMG-0840.jpg">
    </div>
</div>

</div>

<script src="omnizoom/dist/omnizoom.min.js"></script>
<script src="https://code.jquery.com/jquery-1.12.4.js"></script>
<script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>

<script type="text/javascript">
    // start -- make keypoints draggable //
    $(function () {
        $("#inner").draggable({
            containment: "parent"
        });
        $("#outer").draggable({
            containment: "parent"
        });
        $("#pupil").draggable({
            containment: "parent"
        });
    });
    // end -- make keypoints draggable //

    // start -- make image draggable //
    document.getElementById('omnizoom-image').addEventListener('mousedown', start_drag);
    document.getElementById('container').addEventListener('mousemove', while_drag);
	document.getElementById('container').addEventListener('mouseup', stop_drag);
    const image = document.getElementById("omnizoom-image");
    const zmy1 = new omnizoom.Zoomer();
    zmy1.addElem(image)
        .addZoom()
        .addPan();
    var img_ele = null,
    	x_cursor = 0,
    	y_cursor = 0,
    	x_img_ele = 0,
    	y_img_ele = 0;

    function start_drag() {
    	img_ele = this;
    	x_img_ele = window.event.clientX - image.offsetLeft;
    	y_img_ele = window.event.clientY - image.offsetTop;
    }

    function stop_drag(){
    	img_ele = null;
    }

    function while_drag(){
    	var x_cursor = window.event.clientX;
    	var y_cursor = window.event.clientY;
    	if (img_ele !== null){
    		img_ele.style.left = (x_cursor - x_img_ele) + 'px';
    		img_ele.style.top = ( window.event.clientY - y_img_ele) + 'px';
    			console.log(img_ele.style.left+' - '+img_ele.style.top);
    	}
    }
    // end -- make image draggable //
</script>

</body>

</html>